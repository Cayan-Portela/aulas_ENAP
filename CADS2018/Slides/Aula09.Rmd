---
title: "Apresentação e Publicação"
author: "Frederico Bertholini"
subtitle: Aula 09
output:
  ioslides_presentation: 
    widescreen: yes
  beamer_presentation: default
---


```{r,eval=T,include=F}

lista.de.pacotes = c("tidyverse","lubridate","janitor","readxl","stringr","repmis","survey","srvyr") # escreva a lista de pacotes
novos.pacotes <- lista.de.pacotes[!(lista.de.pacotes %in%
                                      installed.packages()[,"Package"])]
if(length(novos.pacotes) > 0) {install.packages(novos.pacotes)}
lapply(lista.de.pacotes, require, character.only=T)
rm(lista.de.pacotes,novos.pacotes)
gc()

knitr::opts_knit$set(root.dir = "/Volumes/Macintosh HD/OneDrive/ENAP/aulas_ENAP")


```


## Preparação para a aula

- Baixe os dados da pasta exercícios (ou faça pull do seu GitHub)

- Configure o GitHub na sua máquina 

 -- Versionamento -> <https://www.curso-r.com/blog/2017-07-17-rstudio-e-github/>

 -- Instruções adicionais de instalação <http://r-bio.github.io/git-installation/>

- Rode todos os pacotes (usando o macetinho) --> pode baixar o script do exercício 6, que já tem tudo. 

- Repositório no GitHub <https://github.com/fredbsr/aulas_ENAP/tree/master/CADS2018>



## Exercício

- Carregue os dados de exemplo do pacote survey `data(api)`, use o data.frame `apisrs` e expanda a amostra usando apenas variável (coluna) "pw", contendo o peso amostral `as_survey(weight=pw)`

- Usando a variável `stype` crie uma nova variável indicando se a escola é de nível fundamental (categorias **E** e **M** de `stype`)  ou de nível médio (categoria *H* de `stype`). Dica: use `mutate`e `cas_when`.

- 


## Resolução
```{r,eval=F}
data(api)

srs_design_srvyr <- apisrs %>% 
  as_survey(fpc = fpc) %>%
  mutate(nivel=case_when(
    stype=="E"~"Fundamental",
    stype=="M"~"Fundamental",
    stype=="H"~"Médio"
  ))

```

## 
```{r,eval=F}

resolucao <- srs_design_srvyr %>%
  group_by(nivel) %>%
  summarize(proporcao = survey_mean(vartype = "cv"),
            n=survey_total(vartype = "ci"))

```



# Rmarkdown

## Princípios

- O que você quer mostrar? <https://i1.wp.com/www.tatvic.com/blog/wp-content/uploads/2016/12/Pic_2.png>

- Elementos que podem **destacar** ou **confundir** o que você quer mostrar.

 -- Exemplo Codeplan

## Trabalhando com slides no RMarkdown

- Manual <https://rmarkdown.rstudio.com/lesson-11.html>

- Galeria <https://rmarkdown.rstudio.com/gallery.html>

File ==> New file ==> R Markdonw ==> Presentation

- HTML (ioslides)

## Trabalhando no .rmd

- Opções e detalhes do ioslides <https://rmarkdown.rstudio.com/ioslides_presentation_format#overview>

- Mais fontes <https://bookdown.org/yihui/rmarkdown/ioslides-presentation.html>

- Montando o arquivo `ìndex.rmd`


## gh-pages


